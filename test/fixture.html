<!doctype html>

<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>px-tooltip Demo</title>
        <!-- Requires Webcomponents.js polyfill is provided by the page for browsers that don't support html imports -->
        <script src="../webcomponentsjs/webcomponents-lite.min.js"></script>
        <script src="../web-component-tester/browser.js"></script>
        <!-- Import custom element. Note: see comment about relative paths to dependencies in the *.html file referenced below -->
        <link rel="import" href="../px-tooltip.html"/>
        <style media="screen">
            .sample-container {
                width: 250px;
                margin-left: auto;
                margin-right: auto;
            }
            .hover-tooltip {
                padding: 15px;
                width: 200px;
                background-color: gray;
                color: white;
                text-align: center;
                vertical-align: middle;
            }
            .test-el {
                padding:10px;
                text-align: center;
                vertical-align: middle;
                background-color: gray;
            }
        </style>
    </head>

    <body>

        <h3>Demo</h3>

        <p>
            Although related, examples are /not/ the same as the test fixtures.
            Tests are tests, examples are examples.
        </p>

        <p>
            Also see the <a href="../index.html">documentation</a> and the <a href="../demo.html">UI demo</a>.
        </p>

        <p>
            Hover over the boxes to see tooltips:
        </p>

        <!-- instance 1, "predix" theme -->
        <div class="sample-container">
            <div id="hoverDivTop" class="hover-tooltip">Hover for tooltip<br/><span>(top, 5 sec delay)</span></div>
            <px-tooltip
                id="topTooltip"
                for="hoverDivTop"
                orientation="top"
                delay="500"
                tooltip-message="Top tooltip">
            </px-tooltip>
            <p></p>
            <div id="hoverDivBottom" class="hover-tooltip">Hover for tooltip<br/><span>(bottom, default delay: 1 sec)</span></div>
            <px-tooltip 
                id="bottomTooltip"
                for="hoverDivBottom" 
                orientation="bottom">
                Bottom tooltip<br>with html<br><div class='test-el'>HTML Div</div>
            </px-tooltip>
            <p></p>
            <div id="hoverDivLeft" class="hover-tooltip">Hover for tooltip<br/><span>(left, delay: 3 sec)</span></div>
            <px-tooltip
                id="leftTooltip"
                for="hoverDivLeft"
                delay="3000"
                orientation="left"
                tooltip-message="Left tooltip">
            </px-tooltip>
            <p></p>
            <div id="hoverDivRight" class="hover-tooltip">Hover for tooltip<br/><span>(right, default delay: 1 sec)</span></div>
            <px-tooltip
                id="rightTooltip"
                for="hoverDivRight"
                orientation="right"
                tooltip-message="Right tooltip">
            </px-tooltip>
        </div>
        <p>

        </p>

        <script>
            suite('<px-tooltip>', function() {
                var testTooltip = document.getElementById('topTooltip');
                var wrapper = document.querySelector('#topTooltip #tooltipWrapper');

                test('reflects the "for" property', function() {
                    assert.equal(testTooltip.for, "hoverDivTop");
                });

                test('reflects the "delay" property', function() {
                    assert.equal(testTooltip.delay, 500);
                });

                test('reflects the "orientation" property', function() {
                    assert.equal(testTooltip.orientation, "top");
                });

                test('reflects the "tooltip-message" property', function() {
                    assert.equal(testTooltip.tooltipMessage, "Top tooltip");
                });

                test('hides tooltip before click', function() {
                    expect(wrapper.classList.contains('hidden')).to.equal(true);
                });

                suite('when tooltip is shown', function() {

                    setup('when _show called', function(done) {
                        testTooltip._show();
                        setTimeout(function() {
                            done();
                        }, 600); // delay is 500 ms
                    });

                    test('_show() shows it (called on hover)', function() {
                        expect(wrapper.classList.contains('hidden')).to.equal(false);
                    });

                });

            });

        </script>
    </body>
</html>
